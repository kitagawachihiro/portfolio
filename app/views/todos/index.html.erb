<%= stylesheet_link_tag 'title', media: 'all', 'data-turbolinks-track': 'reload' %>
<%= stylesheet_link_tag 'index', media: 'all', 'data-turbolinks-track': 'reload' %>
<%= stylesheet_link_tag 'todo/index', media: 'all', 'data-turbolinks-track': 'reload' %>

<div class="title">
  <h1><%= title t 'todos.index.title' %></h1>
  <div class='search_form'>
    <%= search_form_for @q, url: todos_path do |f| %>
      <%= f.search_field :name_cont, placeholder:"場所", class:'form' %>
      <%= f.submit class:'search_btn' %>
    <% end %>
  </div>
</div>

<%= render 'none' if @spots.empty? %>

<% @spots.each do |spot| %>
  <% spot.todos.each do |todo| %>
    <% if current_user.todos.include?(todo) && ( (todo.finished == true && todo.updated_at > Date.today) || todo.finished == false )%>
      <div class="col-lg-4">
        <div class="card mb-3">
          <div class="card-body">
            <h5 class="card-title">
              <%= image_tag 'location-dot-solid.svg', width: "15px;" %>　<%= spot.name %></a>
              <a class="route" href="https://www.google.com/maps/dir/?api=1&origin=&destination=<%= spot.name %>"> <%= image_tag 'map-location-dot-solid.svg', width: "20px;" %></a>
            </h5>
          </div>
        
          <ul class="list-group">  
            
            <li class="list-group-item">
                <div class="item-check">
                  <%= render 'checks/check', todo: todo  %>
                </div>
                <div class="item-content">
                  <%= todo.content %>
                </div>
                <div class="item-right">
                  <%= render 'todos/btn', todo: todo  %>
                </div>
            </li>
          </ul>
        </div>
      </div>
    <% end %>
  <% end %>
<% end %>

<div class="plus_icon">
  <%= link_to new_todo_path do %>
    <%= image_tag 'circle-plus-solid.svg',width: '50px', height: '50px' %>
  <% end %>
</div>

<div class="pagenate">
  <%= paginate @spots, theme: 'twitter-bootstrap-4' %>
</div>
